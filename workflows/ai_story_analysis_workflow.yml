# ğŸ”¥ Loop AI Story Analysis Workflow - ì¢…í•© ìŠ¤í† ë¦¬ ë¶„ì„ ì›Œí¬í”Œë¡œìš°
# Gemini AIë¥¼ í™œìš©í•œ ëŒ€ê·œëª¨ ë¬¸í•™ ì‘í’ˆ ë¶„ì„ ì‹œìŠ¤í…œ
# Version: 2.0
# Author: Loop AI Analysis Team
# Description: NCP ì´ë¡  ê¸°ë°˜ì˜ ì²´ê³„ì ì¸ ìŠ¤í† ë¦¬ ë¶„ì„ ë° í‰ê°€ ì›Œí¬í”Œë¡œìš°

name: comprehensive_story_analysis
version: "2.0"
description: "NCP ì´ë¡ ê³¼ Gemini AIë¥¼ ê²°í•©í•œ ì¢…í•©ì ì¸ ìŠ¤í† ë¦¬ ë¶„ì„ ì‹œìŠ¤í…œ"
author: "Loop AI Team"
created: "2024-12-10"
updated: "2024-12-10"

# ğŸ¯ ì›Œí¬í”Œë¡œìš° ë©”íƒ€ë°ì´í„°
metadata:
  estimated_duration: "15-30ë¶„"
  complexity_level: "high"
  ai_provider: "gemini"
  analysis_depth: "comprehensive"
  output_format: "structured_json"
  supported_languages: ["korean", "english"]
  
# âš™ï¸ ê¸€ë¡œë²Œ ì„¤ì •
global_config:
  # AI ëª¨ë¸ ì„¤ì •
  ai_model: "gemini-2.5-flash"
  max_tokens: 4096
  temperature: 0.3
  top_p: 0.8
  top_k: 40
  
  # ë¶„ì„ íŒŒë¼ë¯¸í„°
  analysis_depth: "comprehensive"
  scoring_scale: 100
  confidence_threshold: 0.7
  retry_attempts: 3
  timeout_seconds: 300
  
  # ì¶œë ¥ ì„¤ì •
  output_language: "korean"
  include_raw_responses: false
  generate_summary: true
  create_actionable_items: true

# ğŸ”§ ì…ë ¥ ë°ì´í„° ìŠ¤í‚¤ë§ˆ
input_schema:
  required:
    - project_id: 
        type: string
        description: "í”„ë¡œì íŠ¸ ê³ ìœ  ID"
    - story_content:
        type: string
        description: "ë¶„ì„í•  ìŠ¤í† ë¦¬ ë‚´ìš©"
        min_length: 100
        max_length: 50000
    - characters:
        type: array
        description: "ë“±ì¥ì¸ë¬¼ ëª©ë¡"
        items:
          name: string
          role: string
          description: string
          
  optional:
    - plot_points:
        type: array
        description: "í”Œë¡¯ í¬ì¸íŠ¸ ëª©ë¡"
    - themes:
        type: array
        description: "ì‘ê°€ê°€ ì˜ë„í•œ í…Œë§ˆ"
    - target_audience:
        type: string
        description: "ëª©í‘œ ë…ìì¸µ"
    - genre:
        type: string
        description: "ì¥ë¥´"
    - additional_context:
        type: string
        description: "ì¶”ê°€ ì»¨í…ìŠ¤íŠ¸"

# ğŸ“Š ë¶„ì„ ë‹¨ê³„ ì •ì˜
stages:
  # Stage 1: ì‚¬ì „ ë¶„ì„ ë° ë°ì´í„° ì¤€ë¹„
  - name: "data_preparation"
    display_name: "ë°ì´í„° ì¤€ë¹„ ë° ì‚¬ì „ ë¶„ì„"
    description: "ì…ë ¥ ë°ì´í„° ê²€ì¦ ë° ê¸°ë³¸ í†µê³„ ë¶„ì„"
    order: 1
    dependencies: []
    timeout_seconds: 60
    
    steps:
      - name: "validate_input"
        description: "ì…ë ¥ ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬"
        type: "validation"
        config:
          required_fields: ["story_content", "characters"]
          min_content_length: 100
          max_content_length: 50000
          character_count_min: 1
          
      - name: "basic_statistics"
        description: "ê¸°ë³¸ í†µê³„ ê³„ì‚°"
        type: "analysis"
        config:
          calculate:
            - word_count
            - character_count
            - paragraph_count
            - dialogue_ratio
            - narrative_ratio
            
      - name: "content_preprocessing"
        description: "ë‚´ìš© ì „ì²˜ë¦¬ ë° êµ¬ì¡°í™”"
        type: "preprocessing"
        config:
          operations:
            - remove_excess_whitespace
            - normalize_quotations
            - identify_dialogue
            - extract_scene_breaks

  # Stage 2: NCP êµ¬ì¡° ë¶„ì„
  - name: "ncp_structural_analysis"
    display_name: "NCP êµ¬ì¡° ë¶„ì„"
    description: "Narrative Context Protocol ê¸°ë°˜ êµ¬ì¡° ë¶„ì„"
    order: 2
    dependencies: ["data_preparation"]
    timeout_seconds: 120
    
    steps:
      - name: "conflict_methodology_analysis"
        description: "ê°ˆë“± ë°©ë²•ë¡  ë¶„ì„"
        type: "ncp_analysis"
        prompt_template: |
          ë‹¤ìŒ ìŠ¤í† ë¦¬ë¥¼ NCP ê°ˆë“± ë°©ë²•ë¡ ìœ¼ë¡œ ë¶„ì„í•´ì£¼ì„¸ìš”:
          
          {story_content}
          
          ë¶„ì„ í•­ëª©:
          1. ê°ˆë“± ì˜ì—­ (Universe): physics/biology/psychology/mind
          2. ê°ˆë“± ê´€ì‹¬ì‚¬ (Concern): êµ¬ì²´ì ì¸ ë¬¸ì œ ì˜ì—­
          3. ê°ˆë“± ì´ìŠˆ (Issue): í•µì‹¬ ìŸì 
          4. ê°ˆë“± ë„ë©”ì¸ (Domain): ì˜í–¥ ë²”ìœ„
          
          ê° í•­ëª©ì„ ëª…í™•íˆ ì‹ë³„í•˜ê³  ê·¼ê±°ë¥¼ ì œì‹œí•´ì£¼ì„¸ìš”.
        config:
          max_tokens: 1500
          temperature: 0.2
          
      - name: "character_methodology_analysis"
        description: "ìºë¦­í„° ë°©ë²•ë¡  ë¶„ì„ (MEEP)"
        type: "ncp_analysis"
        prompt_template: |
          ë‹¤ìŒ ë“±ì¥ì¸ë¬¼ë“¤ì„ NCP MEEP ë°©ë²•ë¡ ìœ¼ë¡œ ë¶„ì„í•´ì£¼ì„¸ìš”:
          
          ë“±ì¥ì¸ë¬¼: {characters}
          ìŠ¤í† ë¦¬ ì»¨í…ìŠ¤íŠ¸: {story_content_summary}
          
          ê° ì£¼ìš” ìºë¦­í„°ì— ëŒ€í•´ ë¶„ì„:
          1. Motivation (ë™ê¸°): ë¬´ì—‡ì„ ì›í•˜ëŠ”ê°€?
          2. Evaluation (í‰ê°€): ì–´ë–»ê²Œ íŒë‹¨í•˜ëŠ”ê°€?
          3. Emotion (ê°ì •): ì–´ë–»ê²Œ ëŠë¼ëŠ”ê°€?
          4. Purpose (ëª©ì ): ì™œ ê·¸ë ‡ê²Œ í–‰ë™í•˜ëŠ”ê°€?
        config:
          max_tokens: 2000
          temperature: 0.3
          
      - name: "story_dynamics_analysis"
        description: "ìŠ¤í† ë¦¬ ì—­í•™ ì‹œìŠ¤í…œ ë¶„ì„"
        type: "ncp_analysis"
        prompt_template: |
          ìŠ¤í† ë¦¬ì˜ ì—­í•™ ì‹œìŠ¤í…œì„ ë¶„ì„í•´ì£¼ì„¸ìš”:
          
          {story_content}
          
          ë¶„ì„í•  ë²¡í„°:
          1. Goal - Consequence (ëª©í‘œ-ê²°ê³¼)
          2. Requirement - Prerequisite (ìš”êµ¬-ì „ì œ)
          3. Cost - Dividend (ë¹„ìš©-ì´ìµ)  
          4. Precondition - Forewarning (ì „ì œì¡°ê±´-ì˜ˆê³ )
          
          ê° ë²¡í„° ìŒì˜ ê· í˜•ê³¼ ë…¼ë¦¬ì„±ì„ í‰ê°€í•´ì£¼ì„¸ìš”.
        config:
          max_tokens: 1800

  # Stage 3: AI ê°•í™” ë¶„ì„
  - name: "ai_enhanced_analysis"
    display_name: "AI ê°•í™” ì¢…í•© ë¶„ì„"
    description: "Gemini AIë¥¼ í™œìš©í•œ ì‹¬ì¸µ ë¶„ì„"
    order: 3
    dependencies: ["ncp_structural_analysis"]
    timeout_seconds: 300
    
    parallel_execution: true
    
    steps:
      - name: "synopsis_analysis"
        description: "ì‹œë†‰ì‹œìŠ¤ ì¢…í•© ë¶„ì„"
        type: "ai_analysis"
        prompt_template: |
          ì „ë¬¸ ì†Œì„¤ í¸ì§‘ìë¡œì„œ ë‹¤ìŒ ì‘í’ˆì„ ì¢…í•© ë¶„ì„í•´ì£¼ì„¸ìš”:
          
          [ì‘í’ˆ ì •ë³´]
          ì¥ë¥´: {genre}
          ëª©í‘œ ë…ì: {target_audience}
          
          [ìŠ¤í† ë¦¬]
          {story_content}
          
          ë¶„ì„ ìš”ì²­:
          1. ì „ì²´ì ì¸ ì™„ì„±ë„ (0-100ì , ê·¼ê±° í¬í•¨)
          2. ìŠ¤í† ë¦¬í…”ë§ ê°•ì  (5ê°€ì§€ ì´ìƒ)
          3. ê°œì„  í•„ìš” ì•½ì  (5ê°€ì§€ ì´ìƒ)
          4. ë…ì ëª°ì…ë„ ì˜ˆì¸¡ ë° ê·¼ê±°
          5. ì‹œì¥ì„± ë° ìƒì—…ì  ê°€ëŠ¥ì„±
          6. êµ¬ì²´ì ì¸ ê°œì„  ì œì•ˆ (ìš°ì„ ìˆœìœ„ í¬í•¨)
          7. ì¶œê°„ ì¤€ë¹„ë„ í‰ê°€
          
          ê° í•­ëª©ì— ëŒ€í•´ êµ¬ì²´ì ì¸ ì˜ˆì‹œì™€ ê·¼ê±°ë¥¼ ë“¤ì–´ ì„¤ëª…í•´ì£¼ì„¸ìš”.
        config:
          max_tokens: 3000
          temperature: 0.2
          
      - name: "character_development_analysis"
        description: "ìºë¦­í„° ë°œì „ ë¶„ì„"
        type: "ai_analysis"
        prompt_template: |
          ìºë¦­í„° ê°œë°œ ì „ë¬¸ê°€ë¡œì„œ ë“±ì¥ì¸ë¬¼ë“¤ì„ ì‹¬ì¸µ ë¶„ì„í•´ì£¼ì„¸ìš”:
          
          [ë“±ì¥ì¸ë¬¼ ì •ë³´]
          {characters_detailed}
          
          [ìŠ¤í† ë¦¬ ì»¨í…ìŠ¤íŠ¸]
          {story_content}
          
          ë¶„ì„ í•­ëª©:
          1. ê° ìºë¦­í„°ì˜ ì•„í¬ ì™„ì„±ë„ (0-100ì )
          2. ìºë¦­í„° ê°„ ê´€ê³„ì˜ ë³µì¡ì„±ê³¼ ë°œì „
          3. ë™ê¸°ì˜ ëª…í™•ì„±ê³¼ ì¼ê´€ì„±
          4. ìºë¦­í„° ì„±ì¥ì˜ í˜„ì‹¤ì„±
          5. ë…ì ê³µê°ë„ ì˜ˆì¸¡
          6. ìºë¦­í„°ë³„ ê°œì„  ì œì•ˆ
          7. ìƒˆë¡œìš´ ìºë¦­í„° ì¶”ê°€ í•„ìš”ì„±
          
          ì‹¬ë¦¬í•™ì  ê´€ì ì—ì„œ ìºë¦­í„°ì˜ í–‰ë™ ë™ê¸°ë¥¼ ë¶„ì„í•´ì£¼ì„¸ìš”.
        config:
          max_tokens: 2500
          temperature: 0.3
          
      - name: "plot_structure_analysis"
        description: "í”Œë¡¯ êµ¬ì¡° ë¶„ì„"
        type: "ai_analysis"
        prompt_template: |
          í”Œë¡¯ êµ¬ì¡° ì „ë¬¸ê°€ë¡œì„œ ìŠ¤í† ë¦¬ êµ¬ì¡°ë¥¼ ë¶„ì„í•´ì£¼ì„¸ìš”:
          
          [ìŠ¤í† ë¦¬]
          {story_content}
          
          [í”Œë¡¯ í¬ì¸íŠ¸]
          {plot_points}
          
          êµ¬ì¡° ë¶„ì„:
          1. 3ë§‰ êµ¬ì¡°ì˜ ê· í˜•ì„± (ê° ë§‰ì˜ ë¹„ì¤‘ê³¼ ê¸°ëŠ¥)
          2. ê°ˆë“±ì˜ ë‹¨ê³„ì  ë°œì „ê³¼ ê°•ë„
          3. í´ë¼ì´ë§¥ìŠ¤ì˜ ìœ„ì¹˜ì™€ íš¨ê³¼ì„±
          4. í•´ê²°ì˜ ë§Œì¡±ë„ì™€ ì™„ê²°ì„±
          5. í˜ì´ì‹±ê³¼ ë¦¬ë“¬ê°
          6. ë³µì„ ê³¼ ë³µíšŒì˜ íš¨ê³¼ì„±
          7. í”Œë¡¯í™€ ë° ë…¼ë¦¬ì  ì˜¤ë¥˜ ì‹ë³„
          8. êµ¬ì¡° ê°œì„ ì„ ìœ„í•œ êµ¬ì²´ì  ì œì•ˆ
          
          ì‹œë‚˜ë¦¬ì˜¤ ê¸°ë²• ê´€ì ì—ì„œë„ í‰ê°€í•´ì£¼ì„¸ìš”.
        config:
          max_tokens: 2800
          temperature: 0.2
          
      - name: "theme_resonance_analysis"
        description: "í…Œë§ˆ ê³µëª… ë¶„ì„"
        type: "ai_analysis"
        prompt_template: |
          ë¬¸í•™ í‰ë¡ ê°€ë¡œì„œ ì‘í’ˆì˜ í…Œë§ˆë¥¼ ê¹Šì´ ìˆê²Œ ë¶„ì„í•´ì£¼ì„¸ìš”:
          
          [ì‘í’ˆ]
          {story_content}
          
          [ì‘ê°€ ì˜ë„ í…Œë§ˆ]
          {intended_themes}
          
          í…Œë§ˆ ë¶„ì„:
          1. í•µì‹¬ í…Œë§ˆ ì‹ë³„ ë° ëª…í™•ì„± (0-100ì )
          2. í…Œë§ˆì˜ í˜•ìƒí™” ë°©ì‹ê³¼ íš¨ê³¼ì„±
          3. ì„œë¸Œí…Œë§ˆì™€ì˜ ì¡°í™”ì™€ ê°ˆë“±
          4. í˜„ëŒ€ì  ì˜ë¯¸ì™€ ë…ì ê³µê°ë„
          5. í…Œë§ˆ ì „ë‹¬ì˜ ì§ì ‘ì„± vs ì€ìœ ì„±
          6. ë©”ì‹œì§€ì˜ ë…ì°½ì„±ê³¼ ê¹Šì´
          7. ì‚¬íšŒì /ì² í•™ì  ê°€ì¹˜ì™€ ì˜ë¯¸
          8. í…Œë§ˆ ê°•í™”ë¥¼ ìœ„í•œ ì œì•ˆ
          
          ë¬¸í•™ì‚¬ì  ë§¥ë½ì—ì„œë„ í‰ê°€í•´ì£¼ì„¸ìš”.
        config:
          max_tokens: 2200
          temperature: 0.4

  # Stage 4: ë…ì ë°˜ì‘ ì˜ˆì¸¡ ë¶„ì„
  - name: "reader_response_prediction"
    display_name: "ë…ì ë°˜ì‘ ì˜ˆì¸¡"
    description: "ë‹¤ì–‘í•œ ë…ìì¸µì˜ ë°˜ì‘ ì˜ˆì¸¡ ë° ë¶„ì„"
    order: 4
    dependencies: ["ai_enhanced_analysis"]
    timeout_seconds: 180
    
    steps:
      - name: "target_audience_analysis"
        description: "íƒ€ê²Ÿ ë…ìì¸µë³„ ë°˜ì‘ ë¶„ì„"
        type: "prediction_analysis"
        prompt_template: |
          ë…ì í–‰ë™ ë¶„ì„ê°€ë¡œì„œ ë‹¤ìŒ ë…ìì¸µë³„ ë°˜ì‘ì„ ì˜ˆì¸¡í•´ì£¼ì„¸ìš”:
          
          [ì‘í’ˆ ì •ë³´]
          ì¥ë¥´: {genre}
          ì£¼ìš” í…Œë§ˆ: {main_themes}
          ìºë¦­í„°: {main_characters}
          
          [ìŠ¤í† ë¦¬ ìš”ì•½]
          {story_summary}
          
          ë…ìì¸µë³„ ë¶„ì„:
          1. 10-20ëŒ€ ë…ì ë°˜ì‘
             - ê´€ì‹¬ë„ ì˜ˆì¸¡ (0-100ì )
             - ëª°ì… í¬ì¸íŠ¸
             - ê±°ë¶€ê° ìš”ì†Œ
             - ì¶”ì²œ ê°€ëŠ¥ì„±
          
          2. 30-40ëŒ€ ë…ì ë°˜ì‘
             - ê³µê°ë„ ì˜ˆì¸¡
             - í˜„ì‹¤ì„± í‰ê°€
             - ë©”ì‹œì§€ ìˆ˜ìš©ì„±
             
          3. 50ëŒ€ ì´ìƒ ë…ì ë°˜ì‘
             - ë¬¸í•™ì  ê°€ì¹˜ í‰ê°€
             - ì „í†µì„± vs í˜ì‹ ì„±
             - ì™„ì„±ë„ ê¸°ëŒ€ì¹˜
          
          ê° ì—°ë ¹ëŒ€ë³„ êµ¬ì²´ì  ê·¼ê±°ì™€ ê°œì„  ë°©í–¥ì„ ì œì‹œí•´ì£¼ì„¸ìš”.
        config:
          max_tokens: 2000
          
      - name: "engagement_prediction"
        description: "ë…ì ì°¸ì—¬ë„ ë° ëª°ì…ë„ ì˜ˆì¸¡"
        type: "prediction_analysis"
        prompt_template: |
          ë…ì ëª°ì…ë„ ì „ë¬¸ê°€ë¡œì„œ ë‹¤ìŒì„ ë¶„ì„í•´ì£¼ì„¸ìš”:
          
          [ì‘í’ˆ]
          {story_content}
          
          ëª°ì…ë„ ë¶„ì„:
          1. ì²« ì¥ë©´ì˜ í¡ì…ë ¥ (0-100ì )
          2. ì¤‘ê°„ ì´íƒˆ ìœ„í—˜ êµ¬ê°„ ì‹ë³„
          3. í´ë¼ì´ë§¥ìŠ¤ê¹Œì§€ ê¸´ì¥ê° ìœ ì§€ë„
          4. ê°ì •ì  ê³ ì¡°ì ë“¤ì˜ ë°°ì¹˜ì™€ íš¨ê³¼
          5. ë…ìì˜ ì˜ˆì¸¡ ê°€ëŠ¥ì„± vs ì˜ì™¸ì„±
          6. í˜ì´ì§€ í„°ë„ˆ ìš”ì†Œë“¤
          7. ì™„ë…ë¥  ì˜ˆì¸¡ê³¼ ê·¼ê±°
          8. ì¬ë…ë¥  ê°€ëŠ¥ì„±
          
          ì‹¬ë¦¬í•™ì  ê·¼ê±°ì™€ í•¨ê»˜ ë¶„ì„í•´ì£¼ì„¸ìš”.
        config:
          max_tokens: 1800
          
      - name: "viral_potential_analysis"
        description: "í™”ì œì„± ë° í™•ì‚° ê°€ëŠ¥ì„± ë¶„ì„"
        type: "market_analysis"
        prompt_template: |
          ì½˜í…ì¸  ë§ˆì¼€íŒ… ì „ë¬¸ê°€ë¡œì„œ ì‘í’ˆì˜ í™”ì œì„±ì„ ë¶„ì„í•´ì£¼ì„¸ìš”:
          
          [ì‘í’ˆ ì •ë³´]
          {story_content}
          {characters}
          {themes}
          
          í™”ì œì„± ë¶„ì„:
          1. SNS í™•ì‚° ê°€ëŠ¥ì„± (0-100ì )
          2. ë°ˆ ìƒì„± ê°€ëŠ¥í•œ ìš”ì†Œë“¤
          3. ë…¼ìŸ ìœ ë°œ ìš”ì†Œì™€ ë¦¬ìŠ¤í¬
          4. ì¸í”Œë£¨ì–¸ì„œ ê´€ì‹¬ë„ ì˜ˆì¸¡
          5. ë¯¸ë””ì–´ ì–´ëŒ‘í…Œì´ì…˜ ê°€ëŠ¥ì„±
          6. íŒ¬ë¤ í˜•ì„± ê°€ëŠ¥ì„±
          7. ìƒí’ˆí™”/êµ¿ì¦ˆ ì ì¬ë ¥
          8. ë§ˆì¼€íŒ… í¬ì¸íŠ¸ ì œì•ˆ
          
          êµ¬ì²´ì ì¸ ë§ˆì¼€íŒ… ì „ëµë„ ì œì‹œí•´ì£¼ì„¸ìš”.
        config:
          max_tokens: 2000

  # Stage 5: ê¸°ìˆ ì  í’ˆì§ˆ í‰ê°€
  - name: "technical_quality_assessment"
    display_name: "ê¸°ìˆ ì  í’ˆì§ˆ í‰ê°€"
    description: "ë¬¸í•™ ê¸°ë²•ê³¼ ì–¸ì–´ ì‚¬ìš©ì˜ ê¸°ìˆ ì  í’ˆì§ˆ í‰ê°€"
    order: 5
    dependencies: ["reader_response_prediction"]
    timeout_seconds: 240
    
    steps:
      - name: "prose_style_analysis"
        description: "ë¬¸ì²´ ë° ì‚°ë¬¸ ê¸°ë²• ë¶„ì„"
        type: "technical_analysis"
        prompt_template: |
          ë¬¸ì²´ ë¶„ì„ ì „ë¬¸ê°€ë¡œì„œ ë‹¤ìŒì„ í‰ê°€í•´ì£¼ì„¸ìš”:
          
          [ì‘í’ˆ í…ìŠ¤íŠ¸]
          {story_content}
          
          ë¬¸ì²´ ë¶„ì„:
          1. ë¬¸ì¥ êµ¬ì¡°ì™€ ë¦¬ë“¬ê° (0-100ì )
          2. ì–´íœ˜ ì„ íƒì˜ ì ì ˆì„±ê³¼ ë‹¤ì–‘ì„±
          3. ë¬¸ì²´ì˜ ì¼ê´€ì„±ê³¼ ê°œì„±
          4. ì¥ë¥´ì— ë§ëŠ” í†¤ ë§¤ì¹˜ë„
          5. ëŒ€í™”ì²´ì™€ ì„œìˆ ì²´ì˜ ê· í˜•
          6. ì€ìœ ì™€ ì§ìœ ì˜ íš¨ê³¼ì  ì‚¬ìš©
          7. ê°ê°ì  í‘œí˜„ê³¼ ì´ë¯¸ì§€
          8. ë¬¸ì²´ ê°œì„ ì„ ìœ„í•œ êµ¬ì²´ì  ì œì•ˆ
          
          ë¬¸í•™ì  ê¸°ë²•ì˜ ìˆ™ë ¨ë„ë¥¼ í‰ê°€í•´ì£¼ì„¸ìš”.
        config:
          max_tokens: 2000
          
      - name: "dialogue_analysis"
        description: "ëŒ€í™” ê¸°ë²• ë¶„ì„"
        type: "technical_analysis"
        prompt_template: |
          ëŒ€í™” ì‘ë²• ì „ë¬¸ê°€ë¡œì„œ ë¶„ì„í•´ì£¼ì„¸ìš”:
          
          [ì‘í’ˆì—ì„œ ëŒ€í™” ë¶€ë¶„ ì¶”ì¶œ]
          {dialogue_samples}
          
          ëŒ€í™” ë¶„ì„:
          1. ìºë¦­í„°ë³„ ë§íˆ¬ ì°¨ë³„í™” (0-100ì )
          2. ìì—°ìŠ¤ëŸ¬ì›€ê³¼ í˜„ì‹¤ì„±
          3. ì •ë³´ ì „ë‹¬ì˜ íš¨ìœ¨ì„±
          4. ê°ˆë“±ê³¼ ê¸´ì¥ê° ì¡°ì„± íš¨ê³¼
          5. í•˜ìœ„ í…ìŠ¤íŠ¸(subtext) í™œìš©
          6. ëŒ€í™” íƒœê·¸ì™€ ë™ì‘ ë¬˜ì‚¬
          7. ëŒ€í™”ë¥¼ í†µí•œ ìºë¦­í„° ê°œì„± í‘œí˜„
          8. ê°œì„ ì´ í•„ìš”í•œ ëŒ€í™” íŒ¨í„´
          
          ì‹œë‚˜ë¦¬ì˜¤ ì‘ë²• ê´€ì ì—ì„œë„ í‰ê°€í•´ì£¼ì„¸ìš”.
        config:
          max_tokens: 1800
          
      - name: "pacing_rhythm_analysis"
        description: "í˜ì´ì‹±ê³¼ ë¦¬ë“¬ ë¶„ì„"
        type: "technical_analysis"
        prompt_template: |
          í˜ì´ì‹± ì „ë¬¸ê°€ë¡œì„œ ìŠ¤í† ë¦¬ì˜ ë¦¬ë“¬ì„ ë¶„ì„í•´ì£¼ì„¸ìš”:
          
          [êµ¬ì¡°í™”ëœ ìŠ¤í† ë¦¬]
          {story_segments}
          
          í˜ì´ì‹± ë¶„ì„:
          1. ì „ì²´ì ì¸ ë¦¬ë“¬ê° (0-100ì )
          2. ê¸´ì¥-ì´ì™„ì˜ ì ì ˆí•œ ë°°ì¹˜
          3. ì•¡ì…˜ê³¼ ë°˜ì„±ì˜ ê· í˜•
          4. ì¥ë©´ ì „í™˜ì˜ ë¶€ë“œëŸ¬ì›€
          5. ì •ë³´ ê³µê°œì˜ íƒ€ì´ë°
          6. ë…ì í˜¸í¡ ê³ ë ¤ë„
          7. í´ë¼ì´ë§¥ìŠ¤ ì¤€ë¹„ ê³¼ì •
          8. í˜ì´ì‹± ê°œì„  ì œì•ˆ
          
          ì˜í™” í¸ì§‘ ê¸°ë²• ê´€ì ì—ì„œë„ ë¶„ì„í•´ì£¼ì„¸ìš”.
        config:
          max_tokens: 1800

  # Stage 6: ì‹œì¥ì„± ë° ìƒì—…ì„± í‰ê°€
  - name: "commercial_viability_assessment"
    display_name: "ì‹œì¥ì„± ë° ìƒì—…ì„± í‰ê°€"
    description: "ì¶œíŒ ì‹œì¥ì—ì„œì˜ ì„±ê³µ ê°€ëŠ¥ì„± í‰ê°€"
    order: 6
    dependencies: ["technical_quality_assessment"]
    timeout_seconds: 150
    
    steps:
      - name: "market_positioning_analysis"
        description: "ì‹œì¥ í¬ì§€ì…”ë‹ ë¶„ì„"
        type: "market_analysis"
        prompt_template: |
          ì¶œíŒ ì‹œì¥ ë¶„ì„ê°€ë¡œì„œ ë‹¤ìŒì„ í‰ê°€í•´ì£¼ì„¸ìš”:
          
          [ì‘í’ˆ ì •ë³´]
          ì¥ë¥´: {genre}
          íƒ€ê²Ÿ: {target_audience}
          ì£¼ìš” í…Œë§ˆ: {themes}
          ê¸¸ì´: {word_count}ë‹¨ì–´
          
          [ìŠ¤í† ë¦¬ ìš”ì•½]
          {story_summary}
          
          ì‹œì¥ì„± ë¶„ì„:
          1. í˜„ì¬ ì‹œì¥ íŠ¸ë Œë“œ ë§¤ì¹˜ë„ (0-100ì )
          2. ê²½ìŸ ì‘í’ˆ ëŒ€ë¹„ ì°¨ë³„í™” ìš”ì†Œ
          3. íƒ€ê²Ÿ ë…ìì¸µ í¬ê¸°ì™€ êµ¬ë§¤ë ¥
          4. ê³„ì ˆì„± ë° ì¶œê°„ íƒ€ì´ë°
          5. ë§ˆì¼€íŒ… í¬ì¸íŠ¸ì™€ ì…€ë§ í¬ì¸íŠ¸
          6. ì˜ˆìƒ íŒë§¤ ë¶€ìˆ˜ì™€ ê·¼ê±°
          7. ì‹œë¦¬ì¦ˆí™” ê°€ëŠ¥ì„±
          8. í•´ì™¸ ë²ˆì—­ ì¶œê°„ ê°€ëŠ¥ì„±
          
          êµ¬ì²´ì ì¸ ì‹œì¥ ë°ì´í„°ì™€ í•¨ê»˜ ë¶„ì„í•´ì£¼ì„¸ìš”.
        config:
          max_tokens: 2200
          
      - name: "publisher_appeal_analysis"
        description: "ì¶œíŒì‚¬ ì–´í•„ í¬ì¸íŠ¸ ë¶„ì„"
        type: "business_analysis"
        prompt_template: |
          ì¶œíŒ ê¸°íšìë¡œì„œ ì¶œíŒì‚¬ ê´€ì ì—ì„œ í‰ê°€í•´ì£¼ì„¸ìš”:
          
          [ì‘í’ˆ ìƒì„¸]
          {story_content}
          {market_analysis_summary}
          
          ì¶œíŒì‚¬ ì–´í•„ë„:
          1. íˆ¬ì ëŒ€ë¹„ ìˆ˜ìµì„± ì˜ˆì¸¡ (0-100ì )
          2. í¸ì§‘ ì‘ì—…ëŸ‰ê³¼ ë¹„ìš©
          3. ë§ˆì¼€íŒ… ë‚œì´ë„ì™€ ì „ëµ
          4. ë¦¬ìŠ¤í¬ ìš”ì†Œì™€ ëŒ€ì‘ ë°©ì•ˆ
          5. ì‘ê°€ì˜ ì„±ì¥ ê°€ëŠ¥ì„±
          6. ë¸Œëœë”©ê³¼ ì‹œë¦¬ì¦ˆ í™•ì¥ì„±
          7. ì¶œíŒì‚¬ë³„ ì í•©ì„± (ë¬¸í•™/ì¥ë¥´/ëŒ€ì¤‘)
          8. ì¶œíŒ ì œì•ˆì„œ ì‘ì„± ê°€ì´ë“œ
          
          ì¶œíŒì‚¬ ì˜ì‚¬ê²°ì • ê´€ì ì—ì„œ ë¶„ì„í•´ì£¼ì„¸ìš”.
        config:
          max_tokens: 1800

  # Stage 7: ì¢…í•© í‰ê°€ ë° ì œì•ˆ
  - name: "comprehensive_evaluation"
    display_name: "ì¢…í•© í‰ê°€ ë° ê°œì„  ì œì•ˆ"
    description: "ëª¨ë“  ë¶„ì„ ê²°ê³¼ë¥¼ ì¢…í•©í•œ ìµœì¢… í‰ê°€"
    order: 7
    dependencies: ["commercial_viability_assessment"]
    timeout_seconds: 200
    
    steps:
      - name: "overall_score_calculation"
        description: "ì¢…í•© ì ìˆ˜ ì‚°ì¶œ"
        type: "evaluation"
        config:
          scoring_weights:
            story_structure: 0.25
            character_development: 0.20
            technical_quality: 0.20
            reader_engagement: 0.15
            theme_depth: 0.10
            commercial_viability: 0.10
          passing_score: 70
          excellence_score: 85
          
      - name: "grade_assignment"
        description: "ë“±ê¸‰ ë¶€ì—¬ ë° í‰ê°€"
        type: "evaluation"
        prompt_template: |
          ì¢…í•© ë¬¸í•™ í‰ê°€ìë¡œì„œ ìµœì¢… ë“±ê¸‰ì„ ë¶€ì—¬í•´ì£¼ì„¸ìš”:
          
          [ëª¨ë“  ë¶„ì„ ê²°ê³¼ ì¢…í•©]
          {all_analysis_summary}
          
          [ì ìˆ˜ ìš”ì•½]
          {score_breakdown}
          
          ìµœì¢… í‰ê°€:
          1. ì¢…í•© ë“±ê¸‰ (A+ ~ F)
          2. ë“±ê¸‰ ë¶€ì—¬ ê·¼ê±°
          3. ì£¼ìš” ê°•ì  TOP 5
          4. í•µì‹¬ ì•½ì  TOP 5
          5. ì¶œê°„ ì¤€ë¹„ë„ (%)
          6. ê°œì„  ìš°ì„ ìˆœìœ„ TOP 10
          7. ì˜ˆìƒ ìˆ˜ì • ê¸°ê°„
          8. ì‘ê°€ ì„±ì¥ ì ì¬ë ¥ í‰ê°€
          
          ê±´ì„¤ì ì´ê³  ê²©ë ¤ì ì¸ í†¤ìœ¼ë¡œ í‰ê°€í•´ì£¼ì„¸ìš”.
        config:
          max_tokens: 2500
          
      - name: "actionable_recommendations"
        description: "ì‹¤í–‰ ê°€ëŠ¥í•œ ê°œì„  ì œì•ˆ"
        type: "recommendation"
        prompt_template: |
          í¸ì§‘ ì»¨ì„¤í„´íŠ¸ë¡œì„œ êµ¬ì²´ì ì¸ ê°œì„  ë°©ì•ˆì„ ì œì‹œí•´ì£¼ì„¸ìš”:
          
          [ì‘í’ˆ í˜„í™©]
          {current_status}
          
          [ë¶„ì„ ê²°ê³¼]
          {comprehensive_analysis}
          
          ì‹¤í–‰ ê³„íš:
          
          Phase 1 (ì¦‰ì‹œ ì‹¤í–‰ - 1-2ì£¼):
          - ì¦‰ê°ì ì¸ ìˆ˜ì • ì‚¬í•­
          - ëª…ë°±í•œ ì˜¤ë¥˜ ìˆ˜ì •
          - ì‰¬ìš´ ê°œì„ ì 
          
          Phase 2 (ë‹¨ê¸° ê°œì„  - 1-2ê°œì›”):
          - êµ¬ì¡°ì  ìˆ˜ì •
          - ìºë¦­í„° ë³´ì™„
          - í”Œë¡¯ ì •êµí™”
          
          Phase 3 (ì¤‘ì¥ê¸° ë°œì „ - 3-6ê°œì›”):
          - ì „ë©´ì  ì¬êµ¬ì„± (í•„ìš”ì‹œ)
          - ìŠ¤íƒ€ì¼ ê°œì„ 
          - ì‹¬í™” ì‘ì—…
          
          ê° ë‹¨ê³„ë³„ êµ¬ì²´ì  ì‘ì—… ëª©ë¡ê³¼ ì²´í¬í¬ì¸íŠ¸ë¥¼ ì œê³µí•´ì£¼ì„¸ìš”.
        config:
          max_tokens: 3000

# ğŸ” í’ˆì§ˆ ë³´ì¦ ë° ê²€ì¦
quality_assurance:
  validation_steps:
    - name: "completeness_check"
      description: "ëª¨ë“  ë¶„ì„ ë‹¨ê³„ ì™„ë£Œ í™•ì¸"
      
    - name: "consistency_validation"
      description: "ë¶„ì„ ê²°ê³¼ ê°„ ì¼ê´€ì„± ê²€ì¦"
      
    - name: "score_verification"
      description: "ì ìˆ˜ ì‚°ì¶œ ë¡œì§ ê²€ì¦"
      
    - name: "recommendation_quality"
      description: "ì œì•ˆì‚¬í•­ ì‹¤í–‰ ê°€ëŠ¥ì„± ê²€í† "

# ğŸš¨ ì—ëŸ¬ ì²˜ë¦¬ ë° ë³µêµ¬
error_handling:
  retry_policy:
    max_attempts: 3
    backoff_strategy: "exponential"
    base_delay: 5000  # milliseconds
    
  fallback_strategies:
    - name: "partial_analysis"
      description: "ì¼ë¶€ ë‹¨ê³„ ì‹¤íŒ¨ ì‹œ ê°€ëŠ¥í•œ ë¶„ì„ë§Œ ìˆ˜í–‰"
      
    - name: "simplified_workflow"
      description: "ì „ì²´ ì‹¤íŒ¨ ì‹œ í•µì‹¬ ë¶„ì„ë§Œ ìˆ˜í–‰"
      
    - name: "human_review_required"
      description: "ì¤‘ìš”í•œ ì˜¤ë¥˜ ë°œìƒ ì‹œ ìˆ˜ë™ ê°œì… ìš”ì²­"

# ğŸ“Š ì¶œë ¥ ìŠ¤í‚¤ë§ˆ
output_schema:
  structure:
    metadata:
      workflow_version: string
      execution_time: string
      total_steps: number
      completed_steps: number
      success_rate: number
      
    analysis_results:
      ncp_analysis:
        conflict_methodology: object
        character_methodology: object
        story_dynamics: object
        
      ai_analysis:
        synopsis: object
        characters: object
        plot: object
        themes: object
        
      predictions:
        reader_response: object
        engagement: object
        market_viability: object
        
      evaluation:
        overall_score: number
        grade: string
        strengths: array
        weaknesses: array
        recommendations: array
        
    actionable_items:
      immediate_actions: array
      short_term_goals: array
      long_term_vision: array
      
    appendix:
      raw_ai_responses: object  # optional
      detailed_scores: object
      confidence_intervals: object

# ğŸ“ˆ ì„±ëŠ¥ ìµœì í™”
performance_optimization:
  parallel_execution:
    enabled: true
    max_concurrent_steps: 4
    priority_queue: true
    
  caching:
    enabled: true
    cache_duration: 3600  # seconds
    cache_key_strategy: "content_hash"
    
  resource_management:
    memory_limit: "2GB"
    cpu_limit: "4 cores"
    network_timeout: 300

# ğŸ”’ ë³´ì•ˆ ë° í”„ë¼ì´ë²„ì‹œ
security:
  data_handling:
    encrypt_in_transit: true
    encrypt_at_rest: true
    retention_policy: "30_days"
    
  access_control:
    authentication_required: true
    role_based_access: true
    audit_logging: true
    
  privacy:
    anonymize_logs: true
    gdpr_compliant: true
    opt_out_available: true

# ğŸ“Š ëª¨ë‹ˆí„°ë§ ë° ë¶„ì„
monitoring:
  metrics:
    - execution_time
    - success_rate
    - user_satisfaction
    - ai_response_quality
    - error_frequency
    
  alerting:
    - high_error_rate
    - slow_performance
    - ai_service_unavailable
    - quota_exceeded
    
  reporting:
    daily_summary: true
    weekly_analytics: true
    monthly_trends: true

# ğŸ”§ í™•ì¥ì„± ê³ ë ¤ì‚¬í•­
extensibility:
  plugin_system:
    enabled: true
    supported_types:
      - custom_analyzers
      - specialized_evaluators
      - domain_specific_workflows
      
  api_integration:
    webhook_support: true
    rest_api: true
    graphql: true
    
  multi_language:
    supported_languages: ["ko", "en", "ja", "zh"]
    auto_detection: true
    translation_support: true

# ğŸ“š ë¬¸ì„œí™” ë° ì§€ì›
documentation:
  user_guide: "workflow_user_guide.md"
  api_reference: "api_documentation.md"
  troubleshooting: "troubleshooting_guide.md"
  
support:
  community_forum: true
  email_support: true
  video_tutorials: true
  
training:
  onboarding_flow: true
  best_practices: true
  case_studies: true

# ğŸ ì›Œí¬í”Œë¡œìš° ì™„ë£Œ
completion_criteria:
  required_conditions:
    - all_critical_steps_completed
    - minimum_quality_threshold_met
    - no_blocking_errors
    
  success_indicators:
    - overall_score_calculated
    - recommendations_generated
    - actionable_plan_created
    
  failure_conditions:
    - critical_analysis_failed
    - ai_service_unavailable
    - invalid_input_data
